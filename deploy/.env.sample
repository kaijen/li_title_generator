# Docker Compose – Konfiguration
# Kopieren und anpassen:
#   cp .env.sample .env
#
# Standardmäßig wird nur compose.yml verwendet.
# Für den Betrieb hinter Traefik:
#   1. Traefik-Variablen unten ausfüllen
#   2. COMPOSE_FILE auf den Stack mit beiden Dateien setzen

# ── Image-Referenz ────────────────────────────────────────────────────────────

IMAGE_NAME=ghcr.io/kaijen/title-image
IMAGE_TAG=latest

# ── COMPOSE_FILE – Overlays ───────────────────────────────────────────────────

COMPOSE_FILE=compose.yml
COMPOSE_PATH_SEPARATOR=:
# Mit Traefik:
# COMPOSE_FILE=compose.yml:compose.traefik.yml

# ── Authentifizierung ─────────────────────────────────────────────────────────

# Offenen Zugriff erlauben, wenn api_keys.json fehlt oder leer ist.
# WARNUNG: Nur für lokale Entwicklung oder explizit ungesicherte Umgebungen.
# Standardmäßig (false) wird jeder Request ohne gültige Keys abgelehnt.
ALLOW_UNAUTHENTICATED=false

# ── Container-Konfiguration ───────────────────────────────────────────────────

# Compose-Projektname (erscheint in docker ps als Gruppe).
COMPOSE_PROJECT_NAME=title-image-prod

# Name des Containers und interner Hostname (docker ps, docker logs, DNS im Netz).
CONTAINER_NAME=title-image-prod

# ── Service-Bindung ───────────────────────────────────────────────────────────

# Externer Port des Containers.
PORT=8000

# Bind-Adresse des Uvicorn-Servers im Container.
# compose.yml setzt den Default bereits auf 0.0.0.0; diese Variable
# hier nur überschreiben, um auf localhost einzuschränken (z. B. Entwicklung).
# HOST=127.0.0.1

# ── Traefik-Konfiguration (nur relevant wenn Overlay aktiv) ──────────────────

# Öffentlicher Hostname, unter dem der Service erreichbar ist
TRAEFIK_HOST=title-image.example.com

# Name des externen Docker-Netzwerks, dem Traefik lauscht
TRAEFIK_NETWORK=traefik

# Traefik-Entrypoint für eingehende Verbindungen ("websecure" für HTTPS)
TRAEFIK_ENTRYPOINT=websecure

# Name des Certificate-Resolvers in der Traefik-Konfiguration
TRAEFIK_CERTRESOLVER=letsencrypt
